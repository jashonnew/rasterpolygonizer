% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/remove_invalid_polys.R
\name{remove_invalid_polys}
\alias{remove_invalid_polys}
\title{Remove invalid building polygons}
\usage{
remove_invalid_polys(
  polys,
  raster,
  buffer_dist = 5,
  ground_tol = 3,
  remove_nested = TRUE
)
}
\arguments{
\item{polys}{An \code{sf} polygon object.}

\item{raster}{A \code{terra::SpatRaster} used to evaluate elevation values.}

\item{buffer_dist}{Numeric buffer distance (map units) used to create
the exterior comparison ring. Default is 1.}

\item{ground_tol}{Numeric tolerance for difference between inside and
outside minimum raster values. If the absolute difference is less than
this value, the polygon is considered ground-contaminated. Default 0.25.}

\item{remove_nested}{Logical; if \code{TRUE}, polygons fully contained within
other polygons are removed after ground filtering. Default \code{TRUE}.}
}
\value{
A cleaned \code{sf} polygon object.
}
\description{
Cleans building polygons in two ordered steps:
}
\details{
\enumerate{
\item Removes polygons that likely include ground values by comparing
minimum raster values inside the polygon to those in a surrounding
buffer ring.
\item Removes polygons completely contained within other polygons.
}

The order is important: ground-contaminated polygons are removed first
to avoid incorrectly discarding valid smaller polygons in favor of
invalid larger ones.
}
