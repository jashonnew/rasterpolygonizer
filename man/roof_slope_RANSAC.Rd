% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/roof_slope_RANSAC.R
\name{roof_slope_RANSAC}
\alias{roof_slope_RANSAC}
\title{Estimate Roof Slope and Aspect Using Robust RANSAC Plane Fitting}
\usage{
roof_slope_RANSAC(
  raster,
  buildings,
  n_iter = 500L,
  thresh = 0.1,
  min_inliers = 10L,
  quiet = FALSE
)
}
\arguments{
\item{raster}{A \code{terra::SpatRaster} containing elevation values.}

\item{buildings}{A \code{terra::SpatVector} of building polygons. Must contain a \code{building_id} field.}

\item{n_iter}{Integer. Number of RANSAC iterations. Default is 500.}

\item{thresh}{Numeric. Residual threshold for inlier classification. Default is 0.1.}

\item{min_inliers}{Integer. Minimum number of inliers required to accept a plane. Default is 10.}

\item{quiet}{Logical. If FALSE (default), progress messages are printed.}
}
\value{
A list with:
\describe{
\item{results_list}{Named list of per-building results.}
\item{summary_table}{Data frame summarizing slope, aspect, inliers, and stability metrics.}
}
}
\description{
Fits a robust plane to raster elevation values within building polygons
using a RANSAC-style approach. Returns per-building slope, aspect, inlier
counts, and a stability metric derived from the top 5\% of candidate fits.
}
\details{
Slope is calculated as:
\deqn{atan(sqrt(a^2 + b^2)) * 180 / pi}

Aspect is calculated as:
\deqn{(atan2(-a, -b) * 180 / pi) \%\% 360}

Stability is computed as the 97.5th minus 2.5th percentile of slope
values across the top 5\% of candidate fits ranked by inlier count.
}
